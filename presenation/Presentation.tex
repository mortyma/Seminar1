\documentclass{beamer}
\let\Tiny=\tiny %to avoid warnings related to font size and beamer 
\usetheme{Amsterdam}
\usecolortheme{dolphin}
\usepackage{amsmath}
\usepackage{tikz}
\usepackage{verbatim}
\usetikzlibrary{arrows,shapes}
\usepackage{hyperref}
\usepackage[style=verbose,backend=bibtex]{biblatex}
\usepackage{comment}

\addbibresource{../sources}

\let\oldfootnotesize\footnotesize
\renewcommand*{\footnotesize}{\oldfootnotesize\tiny}

\title{Parallel network flows}
\subtitle{A follow up seminar to the Parallel Algorithms lecture}
\author{Martin Kalany\inst{1} }
\institute
{
  \inst{1}
  Graduate student in Computer Science\\
  Vienna University of Technology\\
}
\date{\today}

\AtBeginSection[]
{
  \begin{frame}
    \frametitle{Table of Contents}
    \tableofcontents[currentsection]
  \end{frame}
}

\tikzstyle{vertex}=[circle,fill=black!25,minimum size=20pt,inner sep=0pt]
\tikzstyle{edge} = [draw,thick,->,>=stealth',shorten >=1pt]
\tikzstyle{weight} = [font=\small]
\tikzstyle{selected edge} = [draw,line width=2pt,->,red!75,>=stealth',shorten >=1pt]
\tikzstyle{vertexE}=[circle,fill=black!25,minimum size=20pt,inner sep=0pt]


\begin{document}
% Declare layers (for more convenience when drawing graphs)
\pgfdeclarelayer{background}
\pgfsetlayers{background,main}

\frame{\titlepage}
	
\section{Flow networks}
\begin{frame}
	\frametitle{Definitions}
    \begin{block}{Definition: Flow network}
    A \textcolor{red}{flow network}\footnote{\cite{ahuja93}}  is given by $N = (G,s,t,c)$, where
    \begin{itemize}
    		\item $G =(V,A)$ is a directed graph
    		\item $s$ and $t$, $s \neq t$ are the source and terminal node
    		\item $c:A\rightarrow \mathbb{R}_0^{+}$ assigns a capacity $\forall a \in A$
    \end{itemize}
    \end{block}
    \textbf{Assumptions:}
	\begin{itemize}
		\item $G$ is connected
		\item $\nexists P(s,t) \in G$ s.t. $c(P) = \infty$
		\item $G$ is simple, i.e., does not contain loops or parallel arcs
	\end{itemize}
\end{frame}
  
\begin{frame}[shrink]
	\frametitle{Network flows}
	\begin{block}{Definition: Flow}
	$f:A \rightarrow \mathbb{R}_0^{+}$ is a \textcolor{red}{flow} if it satisfies:
	\begin{itemize}
		\item \textbf{Capacity constraints:} $f(a) \leq c(a)$ $\forall a \in A$
		\item \textbf{Flow conservation:} 
		$ \sum\limits_{v \in V} f(u,v) =  0 \Leftrightarrow IN(f,v) = OUT(f,v)$ $\forall v \in V \setminus \{s,t\}$
		\item \textbf{Value of a flow:} $\lvert f\rvert = f(V,t)$ 
	\end{itemize}
	\end{block}
	
	\begin{block}{More definitions }
	A flow $f$	
	\begin{itemize}
		\item is a \textcolor{red}{maximum flow} if $\lvert f\rvert \geq \lvert f'\rvert$, for any other flow $f'$
		\item \textcolor{red}{saturates} an arc a if $f(a) = c(a)$
		\item is a \textcolor{red}{maximal flow} if every directed path P(s,t) contains at least one saturated edge
	\end{itemize}
	\end{block}
\end{frame}

\section{Ford-Fulkerson}
\begin{frame}
	\frametitle{Ford-Fulkerson}
	\framesubtitle{An intuitive sequential algorithm}

	\begin{figure}
	\begin{tikzpicture}[scale=1.8, auto,swap]
    	% draw the vertices
	    \foreach \pos/\name in {{(0,2)/s}, {(1,3)/v_1}, {(2.5,3)/v_2},
    	                        {(1,1)/v_3}, {(2.5,1)/v_4}, {(3.5,2)/t}}
        \node[vertex] (\name) at \pos {$\name$};
    	% Connect vertices with edges and draw weights
    	\foreach \source/ \dest /\weight in {s/v_1/7, s/v_3/8,v_3/v_1/5,v_1/v_4/9,
                                         v_1/v_2/7, v_4/v_2/15, v_3/v_4/5,
                                         v_2/t/8, v_4/t/9}
        	\path[edge] (\source) -- node[weight] {$\weight$} (\dest);
        	\path[edge] (v_4) to[bend right] node[weight] {6}  (v_1);
  
	    % For convenience we use a background layer to highlight edges
    	% This way we don't have to worry about the highlighting covering
	    % weight labels. 
	    \begin{pgfonlayer}{background}
	        \pause
    	    \foreach \source /\dest  /\weight in {v_1/v_4/3,s/v_3/8,v_3/v_4/5,v_4/t/8}
	            \path[selected edge] (\source) -- node[weight,above] {$\weight$}(\dest);
	            \path[selected edge] (v_3) -- node[weight,left] {$3$}(v_1);
	        \pause
    	    \foreach \source /\dest  /\weight in {s/v_1/7,v_1/v_2/7,v_2/t/7}
	            \path[selected edge] (\source) -- node[weight,above] {$\weight$}(\dest);
    	\end{pgfonlayer}
	\end{tikzpicture}
	\end{figure}	
\end{frame}		

\section{Computational Complexity}
\begin{frame}
	\frametitle{Computational Complexity}
	\begin{itemize}
		\item Sequential complexity:
		\begin{itemize}
			\item Ford-Fulkerson: $O((|A|+|V|)*f_{max})$
			\item Edmonds-Karp: $O(|V|^{2} * |E|) $
		\end{itemize}
		\pause
		\item Parallel complexity:
		\begin{itemize}
			\item Construct residual network: $O(1)$
			\item Find augmenting path: $O(log^{2}|V|)$ time and $O(|V|^{2})$ work
			\item \# stages: $O(|f_{max}|)$\\
				\# stages may be reduced to $O(\sqrt(|V|))$\\
			  	\textcolor{red}{but not to a polylogarithmic bound} $O(log^{k}(|V| + |A|))$\\
			  	Proof: Odd Max-Flow is P-complete and  thus $\notin$ NC
			  	\footcite{papa95}.
		\end{itemize}			
	\end{itemize}
\end{frame}


\begin{comment}
\section{Preflow-Push}
\begin{frame}
	\frametitle{Preflow-Push Algorithm}
	\begin{itemize}
		\item Push flow along individual arks instead of paths from $s$ to $t$
		\item Excess flow $e_f(v) \geq 0$ $\forall v \in V$\\
	\end{itemize}

	\begin{figure}
	\begin{tikzpicture}[scale=1.8, auto,swap]
    	% draw the vertices
	    \foreach \pos/\name in {{(0,2)/s}, {(1.5,3)/v_1}, {(3,3)/v_2},
    	                        {(1.5,1)/v_3}, {(3,1)/v_4}, {(4.5,2)/t}}
        \node[vertex] (\name) at \pos {$\name$};
    	% Connect vertices with edges and draw weights
    	\foreach \source/ \dest /\weight in {s/v_1/12, s/v_3/11,v_3/v_1/5,v_1/v_4/9,
                                         v_1/v_2/7, v_4/v_2/15, v_3/v_4/5,
                                         v_2/t/8, v_4/t/9}
        	\path[edge] (\source) -- node[weight] {$\weight$} (\dest);
        	\path[edge] (v_4) to[bend right] node[weight] {6}  (v_1);
  
	    % For convenience we use a background layer to highlight edges
    	% This way we don't have to worry about the highlighting covering
	    % weight labels. 
	    \begin{pgfonlayer}{background}
	        \pause
    	    \foreach \source /\dest  /\weight in {s/v_3/11,s/v_1/12}
	            \path[selected edge] (\source) -- node[weight,above] {$\weight$} (\dest);
	            \node[vertex,label={[color=blue]80:$+12$}] (v_1) at (1.5,3) {$v_1$};
	            \node[vertex,label={[color=blue]280:$+11$}] (v_3) at (1.5,1) {$v_3$};
	           

    	\end{pgfonlayer}
	\end{tikzpicture}
	\end{figure}	
\end{frame} 
\end{comment}
 	 
\begin{frame}[allowframebreaks]
\frametitle<presentation>{Literature}    
\printbibliography
\end{frame} 	 
 	 
\end{document}